---
description: "æ‰§è¡Œå…¨é¢çš„ä»£ç æ£€æŸ¥å’Œæµ‹è¯•ï¼ŒåŒ…æ‹¬ cargo check å’Œ cargo testï¼Œå¯¹å¤±è´¥çš„æµ‹è¯•è¿›è¡Œå•ç‹¬æ‰§è¡Œå’Œåˆ†æï¼Œå¹¶è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜"
---

# å…¨é¢æ£€æŸ¥å’Œæµ‹è¯•å‘½ä»¤ï¼ˆå‡çº§ç‰ˆï¼‰

ä½ æ˜¯ä¸€ä¸ªä»£ç è´¨é‡æ£€æŸ¥ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ‰§è¡Œå…¨é¢çš„ä»£ç æ£€æŸ¥å’Œæµ‹è¯•ï¼Œ**è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜**ï¼Œå¹¶ç”Ÿæˆè¯¦ç»†çš„æŠ¥å‘Šã€‚

## æ ¸å¿ƒæ”¹è¿›

1. **è‡ªåŠ¨ä¿®å¤**ï¼šå¯¹äºç®€å•çš„è­¦å‘Šï¼ˆæœªä½¿ç”¨çš„å˜é‡ã€æ­»ä»£ç ç­‰ï¼‰ï¼Œè‡ªåŠ¨ä¿®å¤
2. **æ™ºèƒ½è¶…æ—¶å¤„ç†**ï¼šå¦‚æœ cargo check è¶…æ—¶ï¼Œè‡ªåŠ¨åˆ†æ­¥æ‰§è¡Œ
3. **é—®é¢˜é›†ä¸­æé—®**ï¼šæ‰€æœ‰éœ€è¦äººå·¥ç¡®è®¤çš„é—®é¢˜åœ¨æœ€åä¸€æ¬¡æ€§è¯¢é—®
4. **è­¦å‘Šåˆ†æ**ï¼šè‡ªåŠ¨æ”¶é›†å’Œåˆ†ææ‰€æœ‰ç¼–è¯‘è­¦å‘Š

## æ£€æŸ¥æ­¥éª¤

### æ­¥éª¤ 0: æ”¶é›†ç¯å¢ƒä¿¡æ¯

```bash
echo "=== ç¯å¢ƒä¿¡æ¯ ==="
rustc --version
cargo --version
uname -a
```

#### æ£€æµ‹æµ‹è¯•å·¥å…·

```bash
# æ£€æµ‹æ˜¯å¦å®‰è£… cargo-nextest
if command -v cargo-nextest &> /dev/null; then
    echo "âœ… æ£€æµ‹åˆ° cargo-nextestï¼Œå°†ä½¿ç”¨ nextest è¿è¡Œæµ‹è¯•"
    USE_NEXTEST=true
else
    echo "â„¹ï¸  æœªæ£€æµ‹åˆ° cargo-nextestï¼Œå°†ä½¿ç”¨ cargo test"
    USE_NEXTEST=false
fi

# æ£€æµ‹æ˜¯å¦æœ‰ nextest é…ç½®
if [ -f ".config/nextest.toml" ]; then
    echo "âœ… æ£€æµ‹åˆ° nextest é…ç½®æ–‡ä»¶: .config/nextest.toml"
    HAS_NEXTEST_CONFIG=true
else
    echo "â„¹ï¸  æœªæ£€æµ‹åˆ° nextest é…ç½®æ–‡ä»¶"
    HAS_NEXTEST_CONFIG=false
fi

# æ£€æµ‹ test-utils ç‰¹æ€§
if grep -r "test-utils" --include="Cargo.toml" . &> /dev/null; then
    echo "âœ… æ£€æµ‹åˆ° test-utils ç‰¹æ€§"
    USE_TEST_UTILS="--features test-utils"
else
    echo "â„¹ï¸  æœªæ£€æµ‹åˆ° test-utils ç‰¹æ€§"
    USE_TEST_UTILS=""
fi
```

### æ­¥éª¤ 1: å…¨é¢ä»£ç æ£€æŸ¥

æ‰§è¡Œ cargo check è¿›è¡Œå…¨é¢çš„ç¼–è¯‘æ£€æŸ¥ï¼š

```bash
cargo check --workspace --all-targets --tests --examples 2>&1 | tee /tmp/cargo_check_output.txt
```

**è¶…æ—¶å¤„ç†**ï¼šå¦‚æœå‘½ä»¤æ‰§è¡Œè¶…è¿‡ 5 åˆ†é’Ÿï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºåˆ†æ­¥æ£€æŸ¥ï¼š
1. `cargo check --workspace` ï¼ˆä¸»ä»£ç ï¼‰
2. `cargo check --workspace --tests` ï¼ˆæµ‹è¯•ä»£ç ï¼‰
3. `cargo check --workspace --examples` ï¼ˆç¤ºä¾‹ä»£ç ï¼‰

**æ£€æŸ¥è¦ç‚¹ï¼š**
- ç¼–è¯‘é”™è¯¯ï¼ˆå¿…é¡»ä¿®å¤ï¼‰
- ç±»å‹ä¸åŒ¹é…
- æœªä½¿ç”¨çš„å˜é‡è­¦å‘Š
- æ­»ä»£ç è­¦å‘Š
- ä¾èµ–ç‰ˆæœ¬å†²çª

**è­¦å‘Šæ”¶é›†**ï¼šä»è¾“å‡ºä¸­æå–æ‰€æœ‰è­¦å‘Šï¼ŒæŒ‰ç±»å‹åˆ†ç±»ï¼š
- `unused_variables` - æœªä½¿ç”¨çš„å˜é‡
- `dead_code` - æ­»ä»£ç ï¼ˆæœªä½¿ç”¨çš„å‡½æ•°/æ–¹æ³•ï¼‰
- `unused_imports` - æœªä½¿ç”¨çš„å¯¼å…¥
- `warnings` - å…¶ä»–è­¦å‘Š

### æ­¥éª¤ 1.5: æ£€æµ‹ test-utils ç‰¹æ€§

**æ³¨æ„**: æ­¤æ­¥éª¤å·²åœ¨æ­¥éª¤ 0 ä¸­è‡ªåŠ¨å®Œæˆã€‚

**å¦‚æœé¡¹ç›®ä½¿ç”¨äº† test-utils ç‰¹æ€§**:
- åœ¨æ‰€æœ‰ `cargo check` å’Œ `cargo test` å‘½ä»¤ä¸­æ·»åŠ  `--features test-utils`
- æ£€æŸ¥æºç ä¸­çš„æµ‹è¯•è¾…åŠ©ä»£ç æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº† `#[cfg(feature = "test-utils")]` é—¨æ§
- éªŒè¯ç”Ÿäº§æ„å»ºä¸åŒ…å«æµ‹è¯•ä»£ç : `cargo build --release`

**æ›´å¤šå…³äº test-utils çš„ä¿¡æ¯**,å‚è€ƒæœ¬æ–‡ä»¶æœ«å°¾çš„"ğŸ§ª test-utils ç‰¹æ€§æœ€ä½³å®è·µ"ç« èŠ‚ã€‚

### æ­¥éª¤ 2: è¿è¡Œæ‰€æœ‰æµ‹è¯•

æ ¹æ®æ­¥éª¤ 0 çš„æ£€æµ‹ç»“æœï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³æµ‹è¯•å·¥å…·ï¼š

#### ä½¿ç”¨ cargo-nextest (æ¨è)

å¦‚æœæ£€æµ‹åˆ° `cargo-nextest`ï¼š

```bash
unset RUST_BACKTRACE
cargo nextest run \
    --workspace \
    $USE_TEST_UTILS \
    --no-fail-fast \
    --failure-output=immediate \
    --success-output=never 2>&1 | tee /tmp/nextest_output.txt
```

#### ä½¿ç”¨ cargo test (fallback)

å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ° `cargo-nextest`ï¼š

```bash
unset RUST_BACKTRACE
cargo test \
    --workspace \
    $USE_TEST_UTILS \
    --no-fail-fast 2>&1 | tee /tmp/cargo_test_output.txt
```

**é‡è¦ï¼š**
- ä¼˜å…ˆä½¿ç”¨ `cargo-nextest`ï¼ˆæ€§èƒ½æå‡ 20-30%ï¼‰
- ä½¿ç”¨ `--no-fail-fast` ç¡®ä¿æ‰€æœ‰æµ‹è¯•éƒ½è¿è¡Œ
- ä½¿ç”¨ `unset RUST_BACKTRACE` é¿å…è¿‡å¤šè¾“å‡º
- è‡ªåŠ¨åº”ç”¨ test-utils ç‰¹æ€§ï¼ˆå¦‚æœæ£€æµ‹åˆ°ï¼‰
- è®°å½•æ‰€æœ‰æµ‹è¯•ç»“æœ
- ç»Ÿè®¡é€šè¿‡/å¤±è´¥/è·³è¿‡çš„æµ‹è¯•æ•°é‡

### æ­¥éª¤ 3: è‡ªåŠ¨ä¿®å¤ç®€å•é—®é¢˜

**3.1 ä¿®å¤æœªä½¿ç”¨çš„å˜é‡**

å¯¹äº `unused_variables` è­¦å‘Šï¼š
- åœ¨å˜é‡åå‰æ·»åŠ  `_` å‰ç¼€ï¼ˆå¦‚ `let _x = ...`ï¼‰
- æˆ–è€…å¦‚æœç¡®å®ä¸éœ€è¦ï¼Œç›´æ¥åˆ é™¤

**3.2 ä¿®å¤æ­»ä»£ç è­¦å‘Š**

å¯¹äº `dead_code` è­¦å‘Šï¼Œåˆ†æä»£ç åé€‰æ‹©ï¼š
- å¦‚æœç¡®å®ä¸éœ€è¦ï¼šåˆ é™¤ä»£ç 
- å¦‚æœæ˜¯å…¬å…± APIï¼šæ·»åŠ  `#[allow(dead_code)]` æ³¨è§£
- å¦‚æœæœªæ¥å¯èƒ½ä½¿ç”¨ï¼šæ·»åŠ  `#[expect(dead_code)]` æ³¨è§£ï¼ˆRust 1.81+ï¼‰

**3.3 ä¿®å¤æœªä½¿ç”¨çš„å¯¼å…¥**

å¯¹äº `unused_imports` è­¦å‘Šï¼š
- ç›´æ¥åˆ é™¤æœªä½¿ç”¨çš„å¯¼å…¥

**3.4 æ‰§è¡Œä¿®å¤**

å¯¹äºæ¯ä¸ªéœ€è¦ä¿®å¤çš„è­¦å‘Šï¼š
1. è¯»å–ç›¸å…³æ–‡ä»¶
2. åˆ†æä»£ç ä¸Šä¸‹æ–‡
3. æ‰§è¡Œä¿®å¤ï¼ˆEdit å·¥å…·ï¼‰
4. è®°å½•ä¿®å¤å†…å®¹

**æ³¨æ„**ï¼šåªä¿®å¤æ˜ç¡®å¯ä»¥è‡ªåŠ¨ä¿®å¤çš„é—®é¢˜ï¼Œå¯¹äºä¸ç¡®å®šçš„ï¼Œè®°å½•åˆ°"éœ€è¦äººå·¥ç¡®è®¤"åˆ—è¡¨ã€‚

### æ­¥éª¤ 4: é€ä¸ªå•ç‹¬æ‰§è¡Œå¤±è´¥çš„æµ‹è¯•

**é‡è¦**ï¼šå¦‚æœæœ‰æµ‹è¯•å¤±è´¥ï¼Œä¸è¦ä½¿ç”¨ `--test-threads=1`ï¼Œè€Œæ˜¯é€ä¸ªå•ç‹¬æ‰§è¡Œã€‚

**æ‰§è¡Œæµç¨‹ï¼š**

1. **æå–å¤±è´¥çš„æµ‹è¯•åˆ—è¡¨**
   - ä»æµ‹è¯•è¾“å‡ºä¸­è§£æå¤±è´¥çš„æµ‹è¯•åç§°
   - è®°å½•æ‰€å±çš„æµ‹è¯•æ–‡ä»¶
   - è®°å½•é”™è¯¯ä¿¡æ¯

2. **å•ç‹¬æ‰§è¡Œæ¯ä¸ªå¤±è´¥çš„æµ‹è¯•**

#### ä½¿ç”¨ cargo-nextest (æ¨è)

å¦‚æœæ£€æµ‹åˆ° `cargo-nextest`ï¼š

```bash
RUST_BACKTRACE=1 cargo nextest run \
    --test-name <test_name> \
    --no-capture \
    --failure-output=immediate \
    $USE_TEST_UTILS
```

#### ä½¿ç”¨ cargo test (fallback)

å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ° `cargo-nextest`ï¼š

å¯¹äºé›†æˆæµ‹è¯•ï¼š
```bash
RUST_BACKTRACE=1 cargo test --test <test_file> --no-capture --no-fail-fast $USE_TEST_UTILS
```

å¯¹äºç‰¹å®šæµ‹è¯•ï¼š
```bash
RUST_BACKTRACE=1 cargo test --test <test_file> <test_name> --no-capture -- --exact $USE_TEST_UTILS
```

**å¯¹æ¯”åˆ†æ**ï¼š
- å¦‚æœæ‰¹é‡å¤±è´¥ä½†å•ç‹¬é€šè¿‡ â†’ **æµ‹è¯•éš”ç¦»é—®é¢˜** ğŸŸ 
- å¦‚æœæ‰¹é‡å’Œå•ç‹¬éƒ½å¤±è´¥ â†’ **ä»£ç é€»è¾‘é—®é¢˜** ğŸ”´
- è®°å½•è¯¦ç»†çš„é”™è¯¯å †æ ˆä¿¡æ¯

### æ­¥éª¤ 5: ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š

ç”Ÿæˆä¸€ä»½è¯¦ç»†çš„æ£€æŸ¥æŠ¥å‘Šï¼š

## âœ… å…¨é¢æ£€æŸ¥æŠ¥å‘Š

### ğŸ“‹ æ¦‚è§ˆ
- **æ£€æŸ¥æ—¶é—´**: [å½“å‰æ—¶é—´]
- **Workspace**: [æ‰€æœ‰ crate åç§°]
- **æ€»ä½“çŠ¶æ€**: [é€šè¿‡/å¤±è´¥/éƒ¨åˆ†é€šè¿‡]
- **ç¯å¢ƒä¿¡æ¯**: [Rust ç‰ˆæœ¬ / Cargo ç‰ˆæœ¬ / OS]
- **æµ‹è¯•å·¥å…·**: [cargo-nextest / cargo test]
- **test-utils ç‰¹æ€§**: [å·²å¯ç”¨ / æœªå¯ç”¨]
- **nextest é…ç½®**: [å·²æ£€æµ‹åˆ° / æœªæ£€æµ‹åˆ°]

### ğŸ” æ­¥éª¤ 1: Cargo Check ç»“æœ

#### ç¼–è¯‘çŠ¶æ€
- **çŠ¶æ€**: [æˆåŠŸ/å¤±è´¥/è¶…æ—¶åˆ†æ­¥æ‰§è¡Œ]
- **æ£€æŸ¥ç›®æ ‡**: lib, bin, tests, examples
- **è­¦å‘Šæ•°é‡**: [æ•°é‡]
- **é”™è¯¯æ•°é‡**: [æ•°é‡]

#### å·²ä¿®å¤çš„è­¦å‘Š âœ…

| æ–‡ä»¶ | è¡Œå· | è­¦å‘Šç±»å‹ | ä¿®å¤æ–¹æ¡ˆ |
|------|------|---------|---------|
| [æ–‡ä»¶è·¯å¾„] | [è¡Œå·] | [unused_variables/dead_code] | [å·²è‡ªåŠ¨ä¿®å¤] |

#### æœªä¿®å¤çš„è­¦å‘Š âš ï¸

| æ–‡ä»¶ | è¡Œå· | è­¦å‘Šç±»å‹ | æè¿° | éœ€è¦äººå·¥ç¡®è®¤ |
|------|------|---------|------|-------------|
| [æ–‡ä»¶è·¯å¾„] | [è¡Œå·] | [è­¦å‘Šç±»å‹] | [è­¦å‘Šæè¿°] | [ä¸ºä»€ä¹ˆä¸ç¡®å®š] |

#### é”™è¯¯åˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰âŒ

| æ–‡ä»¶ | è¡Œå· | é”™è¯¯ç±»å‹ | æè¿° |
|------|------|---------|------|
| [æ–‡ä»¶è·¯å¾„] | [è¡Œå·] | [é”™è¯¯ç±»å‹] | [é”™è¯¯æè¿°] |

### ğŸ§ª æ­¥éª¤ 2: æµ‹è¯•ç»“æœ

#### æµ‹è¯•ç»Ÿè®¡
- **æ€»æµ‹è¯•æ•°**: [æ•°é‡]
- **é€šè¿‡**: [æ•°é‡] ([ç™¾åˆ†æ¯”]%)
- **å¤±è´¥**: [æ•°é‡] ([ç™¾åˆ†æ¯”]%)

#### å¤±è´¥æµ‹è¯•åˆ—è¡¨

| æµ‹è¯•åç§° | æ‰€å±æ–‡ä»¶ | æ‰¹é‡ç»“æœ | å•ç‹¬ç»“æœ | é—®é¢˜ç±»å‹ |
|---------|---------|---------|---------|---------|
| [test_name] | [test_file.rs] | âŒ | âœ… | ğŸŸ  æµ‹è¯•éš”ç¦»é—®é¢˜ |
| [test_name] | [test_file.rs] | âŒ | âŒ | ğŸ”´ é€»è¾‘é”™è¯¯ |

### ğŸ”§ æ­¥éª¤ 3: è‡ªåŠ¨ä¿®å¤ç»“æœ

#### ä¿®å¤ç»Ÿè®¡
- **å°è¯•ä¿®å¤**: [æ•°é‡] ä¸ªé—®é¢˜
- **æˆåŠŸä¿®å¤**: [æ•°é‡] ä¸ª
- **éœ€è¦äººå·¥ç¡®è®¤**: [æ•°é‡] ä¸ª
- **æ— æ³•è‡ªåŠ¨ä¿®å¤**: [æ•°é‡] ä¸ª

#### ä¿®å¤è¯¦æƒ…

##### æˆåŠŸä¿®å¤ âœ…

1. **[é—®é¢˜æè¿°]**
   - æ–‡ä»¶: `[æ–‡ä»¶è·¯å¾„:è¡Œå·]`
   - ç±»å‹: [unused_variables/dead_code/etc]
   - ä¿®å¤: [å…·ä½“ä¿®å¤å†…å®¹]

##### éœ€è¦äººå·¥ç¡®è®¤ âš ï¸

1. **[é—®é¢˜æè¿°]**
   - æ–‡ä»¶: `[æ–‡ä»¶è·¯å¾„:è¡Œå·]`
   - ç±»å‹: [è­¦å‘Šç±»å‹]
   - ä¸ç¡®å®šåŸå› : [ä¸ºä»€ä¹ˆä¸èƒ½è‡ªåŠ¨ä¿®å¤]
   - å»ºè®®: [äººå·¥åº”è¯¥å¦‚ä½•å¤„ç†]

### âŒ æ­¥éª¤ 4: å¤±è´¥æµ‹è¯•è¯¦ç»†åˆ†æ

#### æµ‹è¯•éš”ç¦»é—®é¢˜ ğŸŸ 

è¿™äº›æµ‹è¯•å•ç‹¬æ‰§è¡Œé€šè¿‡ï¼Œä½†æ‰¹é‡æ‰§è¡Œå¤±è´¥ï¼š

| æµ‹è¯•åç§° | é—®é¢˜åŸå›  | å¯èƒ½çš„å†²çªæº |
|---------|---------|-------------|
| [test_name] | [å…±äº«èµ„æº/çŠ¶æ€æ±¡æŸ“] | [è´¦æˆ·ä½™é¢/PoolçŠ¶æ€] |

**åˆ†æè¯¦æƒ…**ï¼š
- æµ‹è¯•è·¯å¾„: `[æ–‡ä»¶è·¯å¾„]`
- å¤±è´¥åŸå› : [è¯¦ç»†åˆ†æ]
- ä¿®å¤å»ºè®®:
  - é€‰é¡¹ A: æ·»åŠ æµ‹è¯•éš”ç¦»ï¼ˆæ¨èï¼‰
  - é€‰é¡¹ B: ä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•è´¦æˆ·
  - é€‰é¡¹ C: åœ¨æµ‹è¯•å‰é‡ç½®çŠ¶æ€

#### é€»è¾‘é”™è¯¯é—®é¢˜ ğŸ”´

è¿™äº›æµ‹è¯•æ— è®ºæ‰¹é‡è¿˜æ˜¯å•ç‹¬æ‰§è¡Œéƒ½å¤±è´¥ï¼š

| æµ‹è¯•åç§° | é”™è¯¯ç±»å‹ | é”™è¯¯ä½ç½® |
|---------|---------|---------|
| [test_name] | [æ–­è¨€å¤±è´¥/panic] | [file:line] |

**åˆ†æè¯¦æƒ…**ï¼š
- æµ‹è¯•è·¯å¾„: `[æ–‡ä»¶è·¯å¾„]`
- é”™è¯¯å †æ ˆ: [å®Œæ•´å †æ ˆä¿¡æ¯]
- å¤±è´¥åŸå› : [æ ¹æœ¬åŸå› åˆ†æ]
- ä¿®å¤å»ºè®®: [å…·ä½“ä¿®å¤æ­¥éª¤]

### ğŸ“Š é—®é¢˜åˆ†ç±»æ±‡æ€»

#### ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆå¿…é¡»ä¿®å¤ï¼‰
- **æ•°é‡**: [æ•°é‡] ä¸ª
- **åˆ—è¡¨**:
  1. [é—®é¢˜æè¿°] - ä½ç½®: `[æ–‡ä»¶:è¡Œå·]`

#### ğŸŸ  æµ‹è¯•éš”ç¦»é—®é¢˜
- **æ•°é‡**: [æ•°é‡] ä¸ª
- **åˆ—è¡¨**:
  1. [æµ‹è¯•åç§°] - å†²çªæº: [èµ„æº/çŠ¶æ€]

#### ğŸŸ¡ è­¦å‘Šï¼ˆå·²ä¿®å¤ï¼‰
- **æ•°é‡**: [æ•°é‡] ä¸ª
- **çŠ¶æ€**: âœ… å·²è‡ªåŠ¨ä¿®å¤

#### âš ï¸ è­¦å‘Šï¼ˆéœ€è¦äººå·¥ç¡®è®¤ï¼‰
- **æ•°é‡**: [æ•°é‡] ä¸ª
- **åˆ—è¡¨**:
  1. [é—®é¢˜æè¿°] - ä¸ç¡®å®šåŸå› : [åŸå› ]

#### ğŸ”µ ç¯å¢ƒé—®é¢˜
- **æ•°é‡**: [æ•°é‡] ä¸ª
- **åˆ—è¡¨**:
  1. [é—®é¢˜æè¿°] - æ‰€éœ€ç¯å¢ƒ: [ç¯å¢ƒæè¿°]

### ğŸ“ˆ ç»Ÿè®¡æ±‡æ€»

```
ç¼–è¯‘æ£€æŸ¥:  âœ… é€šè¿‡ | âš ï¸ [æ•°é‡] è­¦å‘Š | âŒ [æ•°é‡] é”™è¯¯
æµ‹è¯•ç»“æœ:  âœ… [æ•°é‡] é€šè¿‡ | âŒ [æ•°é‡] å¤±è´¥ | ğŸ“Š [ç™¾åˆ†æ¯”]%
è‡ªåŠ¨ä¿®å¤:  âœ… [æ•°é‡] å·²ä¿®å¤ | âš ï¸ [æ•°é‡] éœ€ç¡®è®¤ | âŒ [æ•°é‡] æ— æ³•ä¿®å¤
```

### âœ… ä¸‹ä¸€æ­¥è¡ŒåŠ¨

#### ğŸ”´ ç«‹å³ä¿®å¤ï¼ˆä¸¥é‡é—®é¢˜ï¼‰
- [ ] [å…·ä½“ä»»åŠ¡]

#### ğŸŸ  æµ‹è¯•éš”ç¦»é—®é¢˜
- [ ] [å…·ä½“ä»»åŠ¡]

#### âš ï¸ äººå·¥ç¡®è®¤äº‹é¡¹
- [ ] [å…·ä½“é—®é¢˜]

---

## âš ï¸ é›†ä¸­äººå·¥ç¡®è®¤

**ä»¥ä¸‹é—®é¢˜éœ€è¦æ‚¨çš„ç¡®è®¤ï¼š**

### ğŸ”´ ä¸¥é‡é—®é¢˜å¤„ç†

1. **[é—®é¢˜1]**
   - ä½ç½®: `[æ–‡ä»¶:è¡Œå·]`
   - æè¿°: [é—®é¢˜æè¿°]
   - **é€‰é¡¹**:
     - A) è‡ªåŠ¨ä¿®å¤ï¼ˆæ¨èï¼‰
     - B) æä¾›ä¿®å¤å»ºè®®ï¼Œæˆ‘æ‰‹åŠ¨ä¿®å¤
     - C) æš‚æ—¶å¿½ç•¥
   - **æ‚¨çš„é€‰æ‹©**: [ç­‰å¾…ç”¨æˆ·è¾“å…¥]

### âš ï¸ è­¦å‘Šå¤„ç†

2. **[è­¦å‘Š1]** - æ­»ä»£ç 
   - ä½ç½®: `[æ–‡ä»¶:è¡Œå·]`
   - å‡½æ•°: `[å‡½æ•°å]`
   - **ä¸ç¡®å®šåŸå› **: [åŸå› ]
   - **é€‰é¡¹**:
     - A) åˆ é™¤ä»£ç 
     - B) æ·»åŠ  `#[allow(dead_code)]`
     - C) ä¿ç•™ï¼Œä¸å¤„ç†
   - **æ‚¨çš„é€‰æ‹©**: [ç­‰å¾…ç”¨æˆ·è¾“å…¥]

### ğŸŸ  æµ‹è¯•éš”ç¦»é—®é¢˜å¤„ç†

3. **[æµ‹è¯•åç§°]** - æµ‹è¯•éš”ç¦»é—®é¢˜
   - é—®é¢˜: [é—®é¢˜æè¿°]
   - **é€‰é¡¹**:
     - A) ç«‹å³é‡æ„ï¼Œæ·»åŠ éš”ç¦»ï¼ˆæ¨èï¼‰
     - B) æš‚æ—¶ä½¿ç”¨å•ç‹¬æ‰§è¡Œæ–¹å¼
     - C) æš‚æ—¶å¿½ç•¥
   - **æ‚¨çš„é€‰æ‹©**: [ç­‰å¾…ç”¨æˆ·è¾“å…¥]

### ğŸ¤ è‡ªåŠ¨ä¿®å¤ç¡®è®¤

4. **æ˜¯å¦ç»§ç»­è‡ªåŠ¨ä¿®å¤ï¼Ÿ**
   - å·²æˆåŠŸä¿®å¤: [æ•°é‡] ä¸ªé—®é¢˜
   - å¾…ç¡®è®¤: [æ•°é‡] ä¸ªé—®é¢˜ï¼ˆè§ä¸Šæ–¹åˆ—è¡¨ï¼‰
   - **æ‚¨çš„é€‰æ‹©**:
     - A) ç»§ç»­è‡ªåŠ¨ä¿®å¤æ‰€æœ‰å¯ä¿®å¤çš„é—®é¢˜
     - B) é€ä¸ªç¡®è®¤åå†ä¿®å¤
     - C) åœæ­¢è‡ªåŠ¨ä¿®å¤ï¼Œåªç”ŸæˆæŠ¥å‘Š

---

**è¯·å‘Šè¯‰æˆ‘æ‚¨çš„é€‰æ‹©ï¼ˆè¾“å…¥é€‰é¡¹å­—æ¯æˆ–è¯¦ç»†è¯´æ˜ï¼‰ï¼Œä¾‹å¦‚ï¼š**
- `1A 2B 3A 4A` - ä¸ºæ¯ä¸ªé—®é¢˜é€‰æ‹©å¯¹åº”é€‰é¡¹
- `å…¨éƒ¨è‡ªåŠ¨ä¿®å¤` - è‡ªåŠ¨ä¿®å¤æ‰€æœ‰å¯ä¿®å¤çš„é—®é¢˜
- `åªä¿®å¤ä¸¥é‡é—®é¢˜` - åªä¿®å¤ä¸¥é‡é—®é¢˜ï¼Œå…¶ä»–å¿½ç•¥
- `ç”Ÿæˆä¿®å¤è®¡åˆ’` - ä¸è‡ªåŠ¨ä¿®å¤ï¼Œç”Ÿæˆè¯¦ç»†çš„ä¿®å¤è®¡åˆ’

## æ‰§è¡Œæ³¨æ„äº‹é¡¹

1. **è‡ªåŠ¨ä¿®å¤è¦ä¿å®ˆ**ï¼šåªä¿®å¤ç¡®å®šçš„é—®é¢˜ï¼Œä¸ç¡®å®šçš„è®°å½•ä¸‹æ¥
2. **æ‰¹é‡æé—®**ï¼šæ‰€æœ‰é—®é¢˜æ”¶é›†å®Œåä¸€æ¬¡æ€§è¯¢é—®ç”¨æˆ·
3. **è¯¦ç»†è®°å½•**ï¼šè®°å½•æ‰€æœ‰è­¦å‘Šã€é”™è¯¯ã€æµ‹è¯•å¤±è´¥ä¿¡æ¯
4. **è¶…æ—¶å¤„ç†**ï¼šå¦‚æœ cargo check è¶…æ—¶ï¼Œåˆ†æ­¥æ‰§è¡Œ
5. **æµ‹è¯•éš”ç¦»åˆ¤æ–­**ï¼šé€šè¿‡å¯¹æ¯”æ‰¹é‡å’Œå•ç‹¬æ‰§è¡Œç»“æœæ¥åˆ¤æ–­
6. **ä¿®å¤éªŒè¯**ï¼šä¿®å¤åé‡æ–°è¿è¡Œ cargo check éªŒè¯

## è‡ªåŠ¨ä¿®å¤è§„åˆ™

### å¯ä»¥è‡ªåŠ¨ä¿®å¤çš„
- âœ… æœªä½¿ç”¨çš„å˜é‡ï¼ˆåŠ  `_` å‰ç¼€ï¼‰
- âœ… æœªä½¿ç”¨çš„å¯¼å…¥ï¼ˆåˆ é™¤ï¼‰
- âœ… æ˜ç¡®çš„æ­»ä»£ç ï¼ˆå¦‚æœæ ‡è®°ä¸º private ä¸”æ— å¼•ç”¨ï¼Œåˆ é™¤ï¼‰

### éœ€è¦äººå·¥ç¡®è®¤çš„
- âš ï¸ public å‡½æ•°/æ–¹æ³•çš„æ­»ä»£ç è­¦å‘Š
- âš ï¸ å¯èƒ½åœ¨æœªæ¥ä½¿ç”¨çš„ä»£ç 
- âš ï¸ æµ‹è¯•ä»£ç ä¸­çš„è­¦å‘Š
- âš ï¸ å®ç›¸å…³çš„è­¦å‘Š
- âš ï¸ ä¾èµ–ç‰ˆæœ¬ç›¸å…³çš„è­¦å‘Š

### ä¸èƒ½è‡ªåŠ¨ä¿®å¤çš„
- âŒ ç¼–è¯‘é”™è¯¯ï¼ˆéœ€è¦äººå·¥åˆ†æï¼‰
- âŒ æµ‹è¯•å¤±è´¥ï¼ˆéœ€è¦åˆ†æå¤±è´¥åŸå› ï¼‰
- âŒ å¤æ‚çš„é€»è¾‘é”™è¯¯

å¼€å§‹æ‰§è¡Œå…¨é¢æ£€æŸ¥ä»»åŠ¡ã€‚

---

## ğŸ§ª test-utils ç‰¹æ€§æœ€ä½³å®è·µ

å½“é¡¹ç›®éœ€è¦æµ‹è¯•è¾…åŠ©åŠŸèƒ½æ—¶,åº”è¯¥ä½¿ç”¨ **æ¡ä»¶ç¼–è¯‘ç‰¹æ€§** æ¥éš”ç¦»æµ‹è¯•ä»£ç ã€‚

### ä»€ä¹ˆæ˜¯ test-utils ç‰¹æ€§?

`test-utils` æ˜¯ä¸€ä¸ª Cargo feature,ç”¨äºåœ¨æºç ä¸­æä¾›æµ‹è¯•ä¸“ç”¨çš„è¾…åŠ©å‡½æ•°å’Œå·¥å…·,åŒæ—¶ç¡®ä¿ç”Ÿäº§æ„å»ºä¸åŒ…å«è¿™äº›ä»£ç ã€‚

### åœ¨ Cargo.toml ä¸­å£°æ˜

```toml
[features]
test-utils = []  # ä¸å¯ç”¨é»˜è®¤,æµ‹è¯•æ—¶æ‰‹åŠ¨å¯ç”¨
```

### åœ¨æºç ä¸­ä½¿ç”¨

```rust
// âœ… æ­£ç¡®: åœ¨ src/lib.rs æˆ–å…¶ä»–æºæ–‡ä»¶ä¸­ä½¿ç”¨ç‰¹æ€§é—¨æ§
#[cfg(feature = "test-utils")]
pub mod testing {
    pub use super::internal_helpers;

    pub fn create_test_client() -> Client {
        // æµ‹è¯•ä¸“ç”¨çš„æ„é€ å‡½æ•°
        Client::new_for_testing()
    }
}

// ç”Ÿäº§ä»£ç ä¸ä¼šè¢«ç¼–è¯‘
#[cfg(not(feature = "test-utils"))]
fn internal_helpers() {
    // åªåœ¨æµ‹è¯•æ—¶å¯ç”¨
}
```

### è¿è¡Œæµ‹è¯•æ—¶å¯ç”¨ç‰¹æ€§

**é‡è¦**: å¦‚æœé¡¹ç›®ä½¿ç”¨äº† test-utils ç‰¹æ€§,åœ¨æ£€æŸ¥å’Œè¿è¡Œæµ‹è¯•æ—¶å¿…é¡»å¯ç”¨è¯¥ç‰¹æ€§:

```bash
# âŒ é”™è¯¯: å¦‚æœä»£ç ä¾èµ– test-utils,è¿™ä¼šç¼–è¯‘å¤±è´¥
cargo test
cargo check

# âœ… æ­£ç¡®: å¯ç”¨ test-utils ç‰¹æ€§
cargo test --features test-utils
cargo check --features test-utils

# CI/CD ä¸­åº”è¯¥å¯ç”¨æ‰€æœ‰ç›¸å…³ç‰¹æ€§
cargo test --all-features
# æˆ–è€…
cargo test --features "test-utils,other-features"
```

### ä¸ºä»€ä¹ˆè¿™æ ·åš?

- âœ… **å‡å°äºŒè¿›åˆ¶å¤§å°**: ç”Ÿäº§æ„å»ºä¸åŒ…å«æµ‹è¯•ä»£ç 
- âœ… **é˜²æ­¢æ»¥ç”¨**: æµ‹è¯•è¾…åŠ©å‡½æ•°ä¸ä¼šåœ¨ç”Ÿäº§ä»£ç ä¸­æ„å¤–è°ƒç”¨
- âœ… **æ¸…æ™°åˆ†ç¦»**: æ˜ç¡®åŒºåˆ†ç”Ÿäº§ä»£ç å’Œæµ‹è¯•ä»£ç 
- âœ… **é¿å…æ³„éœ²**: å†…éƒ¨å®ç°ç»†èŠ‚ä¸ä¼šæš´éœ²ç»™ç”Ÿäº§ç”¨æˆ·

### æ£€æŸ¥æ¸…å•

åœ¨ä½¿ç”¨æœ¬å‘½ä»¤æ£€æŸ¥ä»£ç æ—¶:

- [ ] æ£€æµ‹é¡¹ç›®æ˜¯å¦ä½¿ç”¨äº† test-utils ç‰¹æ€§
- [ ] å¦‚æœä½¿ç”¨äº†,åœ¨æ‰€æœ‰ cargo å‘½ä»¤ä¸­æ·»åŠ  `--features test-utils`
- [ ] éªŒè¯æµ‹è¯•è¾…åŠ©ä»£ç æ­£ç¡®ä½¿ç”¨äº† `#[cfg(feature = "test-utils")]`
- [ ] ç¡®è®¤ç”Ÿäº§æ„å»ºä¸åŒ…å«æµ‹è¯•ä»£ç : `cargo build --release`
- [ ] åœ¨æŠ¥å‘Šä¸­æ³¨æ˜æ˜¯å¦ä½¿ç”¨äº† test-utils ç‰¹æ€§

### æ£€æµ‹å‘½ä»¤

æœ¬å‘½ä»¤ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ£€æµ‹:

```bash
# æ­¥éª¤ 1.5 ä¸­æ‰§è¡Œ
grep -r "test-utils" --include="Cargo.toml" . || echo "æœªæ‰¾åˆ° test-utils ç‰¹æ€§"

# å¦‚æœæ‰¾åˆ°,ä¼šåœ¨åç»­å‘½ä»¤ä¸­è‡ªåŠ¨æ·»åŠ  --features test-utils
```
